<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Blawx Development Update and Other News | Jason Morris</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="It&rsquo;s been a while since I did a blog about the changes to Blawx, so let&rsquo;s get you caught up!
Spans For reasons that will be clear shortly, we needed a way to delineate and name parts of a paragraph of text. So I made some changes to CLEAN so that you can use the following format to be able to treat spans of legal text as though they were a sub-part of the law."><meta name=generator content="Hugo 0.98.0"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel=stylesheet href=/ananke/css/main.min.css><meta property="og:title" content="Blawx Development Update and Other News"><meta property="og:description" content="It&rsquo;s been a while since I did a blog about the changes to Blawx, so let&rsquo;s get you caught up!
Spans For reasons that will be clear shortly, we needed a way to delineate and name parts of a paragraph of text. So I made some changes to CLEAN so that you can use the following format to be able to treat spans of legal text as though they were a sub-part of the law."><meta property="og:type" content="article"><meta property="og:url" content="https://JasonMorrisSC.github.io/post/2022-03-29_blawx_v1.3/"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-05-09T00:00:00+00:00"><meta property="article:modified_time" content="2022-05-09T00:00:00+00:00"><meta itemprop=name content="Blawx Development Update and Other News"><meta itemprop=description content="It&rsquo;s been a while since I did a blog about the changes to Blawx, so let&rsquo;s get you caught up!
Spans For reasons that will be clear shortly, we needed a way to delineate and name parts of a paragraph of text. So I made some changes to CLEAN so that you can use the following format to be able to treat spans of legal text as though they were a sub-part of the law."><meta itemprop=datePublished content="2022-05-09T00:00:00+00:00"><meta itemprop=dateModified content="2022-05-09T00:00:00+00:00"><meta itemprop=wordCount content="1420"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Blawx Development Update and Other News"><meta name=twitter:description content="It&rsquo;s been a while since I did a blog about the changes to Blawx, so let&rsquo;s get you caught up!
Spans For reasons that will be clear shortly, we needed a way to delineate and name parts of a paragraph of text. So I made some changes to CLEAN so that you can use the following format to be able to treat spans of legal text as though they were a sub-part of the law."></head><body class="ma0 avenir bg-near-white"><header><div class=bg-black><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">Jason Morris</a><div class="flex-l items-center"><ul class="pl0 mr3"><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/about/ title="About Jason page">About Jason</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/project/ title="Projects page">Projects</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/post/ title="Rules as Code Diary page">Rules as Code Diary</a></li></ul><div class=ananke-socials><a href=https://twitter.com/RoundTableLaw target=_blank class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel=noopener aria-label="follow on Twitter——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:{{ .fill }}"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg></span></a></div></div></div></nav></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked">RULES AS CODE DIARY</aside><div id=sharing class="mt3 ananke-socials"><a href="https://twitter.com/share?url=https://JasonMorrisSC.github.io/post/2022-03-29_blawx_v1.3/&text=Blawx%20Development%20Update%20and%20Other%20News" class="ananke-social-link twitter no-underline" aria-label="share on Twitter"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:{{ .fill }}"/></svg></span></a></div><h1 class="f1 athelas mt3 mb1">Blawx Development Update and Other News</h1><time class="f6 mv4 dib tracked" datetime=2022-05-09T00:00:00Z>May 9, 2022</time></header><div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p>It&rsquo;s been a while since I did a blog about the changes to Blawx,
so let&rsquo;s get you caught up!</p><h2 id=spans>Spans</h2><p>For reasons that will be clear shortly, we needed a way to delineate and name
parts of a paragraph of text. So I made some changes to CLEAN so that you
can use the following format to be able to treat spans of legal text as though
they were a sub-part of the law. The format looks like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-text data-lang=text><span style=display:flex><span>Bird Act
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>1. Penguins are birds.
</span></span><span style=display:flex><span>2. If a thing is a bird, it flies, [penguin]{unless it is a penguin}.
</span></span></code></pre></div><p>That code will generate sections named <code>BA</code>, <code>BA 1</code>, <code>BA 2</code>, and <code>BA 2.penguin</code>,
each of which can be selected in the navigation window, and referred to in
the interface.</p><p><img src=/known_sections.png alt></p><p><img src=/span_selectors.png alt></p><h2 id=exceptions>Exceptions</h2><p><img src=/exceptions_tray.png alt></p><p>Exceptions are critical to maintaining the one-to-one relationship between small
chunks of law and corresponding chunks of code. Laws use defaults and exceptions
all the time, and if you Rules as Code tool doesn&rsquo;t know how to deal with them,
you are going to have to take multiple parts of the law and combine them into
a single piece of code. That&rsquo;s going to make everything harder for your users,
but in particular it makes the resulting code much more difficult to maintain
when the rules change.</p><p>We now have defaults and exceptions implemented in Blawx. If a section of law
reaches a conclusion &ldquo;defeasibly&rdquo; (that is, subject to contrary conclusions
elsewhere), you can use the &ldquo;according to&rdquo; block in order to say what conclusion
is reached and by which section. A new Rule block with an &ldquo;according to&rdquo; block
pre-filled with the currently-selected section of law has been added to the
Primary drawer of the toolbox, to ensure this requires no additional work.</p><p>Then, if two sections reach opposing conclusions, you can use the &ldquo;overrules&rdquo;
block to indicate which of the two sections should get priority. Importantly,
this block can be put anywhere in the code, which means you can accurately
reflect the difference in placement of &ldquo;despite&rdquo; and &ldquo;subject to&rdquo; statements
in legislation.</p><p>If it&rsquo;s not obvious that two conclusions oppose one another, you can make it
clear to the reasoner by using the &ldquo;opposes&rdquo; block.</p><p>Finally, there is a &ldquo;holds&rdquo; block, that allows you to query whether a defeasible
conclusion was found to be true, and not defeated by any other rule. Again, a new
question with the holds block included has been added to the Primary drawer, so
that using the defeasibility method requires no additional work except for setting
out the &ldquo;overrules&rdquo; blocks.</p><p>The current method of determining whether or not a rule is defeated is very simple,
but it will be made more sophisticated in future versions.</p><p><img src=/overrule_penguin.png alt></p><p>Why did we need spans? Sometimes, the default and the exception appear <em>in the same section</em>.
In the Bird Act
example that comes with the new version of Blawx, based on the statute text above,
section <code>BA 2.penguine</code> overrules section <code>BA 2</code>. We needed to give section <code>BA 2.penguin</code>
a name to be able to say that.</p><h2 id=explanations>Explanations</h2><p><img src=/new_explanation.png alt></p><p>A <strong>lot</strong> of changes have been made to how explanations are displayed inside the tool.
The first is that rather than returning a list of &ldquo;models&rdquo;, Blawx
now divides the results into a numbered list of &ldquo;Answers&rdquo;, with each answer having
one or more &ldquo;Explanations&rdquo;. The Answers now also explicitly display the bindings
that were used in that answer - the value that was found for each of the variables
in your question.</p><p>Explanations are now also displayed as a collapsible tree, making them easier to
read, and allowing the user to navigate to the part of the explanation that is
relevant to them without being confronted with a wall of text.</p><h2 id=legislative-text-in-explanations>Legislative Text in Explanations</h2><p>When the name of a section appears in an &ldquo;according to&rdquo; entry in an explanation,
Blawx will now translate the name of the section from it&rsquo;s machine-readable ID
to a human language name, and link the name. The link doesn&rsquo;t go anywhere, but
if you hover over the link it displays the text of the section of the law that
was referred to in the &ldquo;according to&rdquo; block.</p><p>In this way, the natural language explanations now refer back to the legislative
text from which the encoded rules were derived.</p><p>It&rsquo;s possible to expand this capability further, but the point, for now, is to
demonstrate the ability to link the explanations to the legislative text that
was used in generating them.</p><h2 id=examples>Examples</h2><p><img src=/example_list.png alt></p><p>I have expanded the Rock Paper Scissors example, re-added the Mortality example,
added the Bird Act example to demonstrate defaults and exceptions and spans.</p><p>Work has also started on a Rule 34 example. It is based on code I wrote in a project undertaken at
Singapore Management University Centre for Computational Law last year.
The project used s(CASP) to debug a small piece of legislation. I&rsquo;m hoping to be able
to recreate that experience in Blawx, to show how it can be used for legislative
drafting tasks.</p><h2 id=api-changes>API Changes</h2><p>All of the changes to explanations required changing the format of the data that is returned
by the API version of a Blawx test. Implementing links to statutory text also involved the
creation of a new API end point that allows you to grab either the plain-text or Akoma Ntoso
representation of a named section of a rule, for use in explanations and anywhere else you like.</p><h2 id=video-demo>Video Demo</h2><p>All the things discussed above are shown in this video. Remember that you can click on the gear
icon and play it at a higher speed to make it shorter.</p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube.com/embed/Kfm1XkmlF_E style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div><h2 id=acknowledgements>Acknowledgements</h2><p>I ran into a problem that made some of the
tests in Blawx appear as though they were going into an infinite loop. In fact,
they were only failing to display the results. The problem was complicated, but in
the end there was a bug in my code, and a feature missing from a SWI-Prolog library.
Thanks to Jan Wielemaker and Eric Zinda for help in diagnosing and resolving that
problem.</p><h2 id=whats-coming-up>What&rsquo;s Coming Up?</h2><p>In the near term, I&rsquo;m going to be continuing to implement the Rule 34 demonstration,
adding dates as a datatype, and modifying the format used when submitting data
to the reasoner over the API, to make it more user friendly.</p><p>Once those things are done, the next challenge is to automatically generate
user-facing interviews on the basis of a Blawx test.</p><h2 id=other-news>Other News</h2><h3 id=blockly-conference>Blockly Conference</h3><p>I had the absolute pleasure of attending the <a href=https://sites.google.com/view/blockly-user-summit-2022/>Blockly Summit 2022</a> and doing a lightning
talk on Blawx while I was there. I learned a lot from the various people using Blockly,
in particular a number of ideas that will be directly applicable when it comes time
to generate tutorials and other training material.</p><h3 id=yscript>yscript</h3><p><a href=http://datalex.org/>DataLex</a> is currently
the best tool in the world for demonstrating the power of Rules as Code. Unfortunately,
it has not been a viable option for deployment in a lot of scenarios because it was not publicly
available. I&rsquo;m delighted that <em>just today</em>, I received, by email, source code for <code>yscript</code>
the coding language that powers DataLex.</p><p>I&rsquo;m hoping that the availability of <code>yscript</code> will increase the options that are available
for real-world deployment of Rules as Code. More personally, I&rsquo;m hoping to learn from
what they did in terms of the API for powering expert systems online, and see if those
lessons can be applied to Blawx.</p><p>I understand that a public repository is en route, but if you are looking for source code in
the mean time, I can point you in the right direction.</p><h3 id=canada-school>Canada School</h3><p>I have been continuing to work with the Canada School of Public Service on their Rules as Code
projects, and have been targetting Blawx development at the needs of some of the projects
currently under consideration at the school.</p><p>It has been very rewarding to, in the last few weeks, be able to screen share Blawx with
technologists in the government, and do a quick demonstration of what it is, and how it works.
Usually, peoples&rsquo; eyes light up when you demonstrate that every &ldquo;test&rdquo; in Blawx is also an
API endpoint that can be used to automate any number of other tools.</p><p>There is still more to learn than we know, but CSPS is committed to learning it, and I feel
extremely lucky to be along for the ride.</p><p>Conversations continue with departments on other possible Rules as Code projects, and I&rsquo;ll pass
along details when I can.</p><ul class=pa0></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links"><p class="f5 b mb3">What's in this post</p><nav id=TableOfContents><ul><li><ul><li><a href=#spans>Spans</a></li><li><a href=#exceptions>Exceptions</a></li><li><a href=#explanations>Explanations</a></li><li><a href=#legislative-text-in-explanations>Legislative Text in Explanations</a></li><li><a href=#examples>Examples</a></li><li><a href=#api-changes>API Changes</a></li><li><a href=#video-demo>Video Demo</a></li><li><a href=#acknowledgements>Acknowledgements</a></li><li><a href=#whats-coming-up>What&rsquo;s Coming Up?</a></li><li><a href=#other-news>Other News</a><ul><li><a href=#blockly-conference>Blockly Conference</a></li><li><a href=#yscript>yscript</a></li><li><a href=#canada-school>Canada School</a></li></ul></li></ul></li></ul></nav></div><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links"><p class="f5 b mb3">Related</p><ul class="pa0 list"><li class=mb2><a href=/post/prolala/>Notes from Prolala 2022</a></li><li class=mb2><a href=/post/2022-03-11_blawx_1.2a/>New Blawx, Rules as Code 2.0 Plenary, SMU Conference Vids Available</a></li><li class=mb2><a href=/post/2022-03-07_clean/>Introducing CLEAN - Markdown for Akoma Ntoso</a></li><li class=mb2><a href=/post/2022-02-24_blawx_progress/>Progress on Blawx, SMU Conference, Beeck Centre Rules as Code Paper</a></li><li class=mb2><a href=/post/2022-03-08_legal_docs_take_2/>Legal Documents in Blawx, Take 2</a></li><li class=mb2><a href=/post/blawx_v1/>Announcing Blawx v1.0.0-alpha</a></li><li class=mb2><a href=/post/2022-01-23_legal_docs_in_blawx/>Encoding Legal Documents in Blawx</a></li><li class=mb2><a href=/post/2022-01-09_scasp_trick/>Avoiding the Clause Order Hassle in s(CASP)</a></li><li class=mb2><a href=/post/constraint_dates_scasp/>Constraining Dates in s(CASP)</a></li><li class=mb2><a href=/post/roundtablelaw/computational-law-diary-2020-2021-in-review-51b66f3253b4/>Rules as Code Diary 2020–2021 in Review</a></li><li class=mb2><a href=/post/roundtablelaw/s-casp-swi-prolog-ccf8e53c951a/>s(CASP) + SWI-Prolog = 🔥</a></li><li class=mb2><a href=/post/roundtablelaw/rules-as-code-extended-abstract-to-appear-in-icail-21-proceedings-7fc5dedbf8b8/>“Rules as Code” Extended Abstract to appear in ICAIL ’21 Proceedings</a></li><li class=mb2><a href=/post/roundtablelaw/need-legal-tech-hire-an-architect-1a031673654a/>Need Legal Tech? Hire an Architect.</a></li><li class=mb2><a href=/post/roundtablelaw/how-rules-as-code-makes-laws-better-115ab62ab6c4/>How Rules as Code Makes Laws Better</a></li><li class=mb2><a href=/post/roundtablelaw/open-source-legal-expert-systems-video-3m-b57bcde7f490/>Open Source Legal Expert Systems Video (3m)</a></li></ul></div></aside></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://JasonMorrisSC.github.io>&copy; Jason Morris 2022</a><div><div class=ananke-socials><a href=https://twitter.com/RoundTableLaw target=_blank class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel=noopener aria-label="follow on Twitter——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:{{ .fill }}"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg></span></a></div></div></div></footer></body></html>