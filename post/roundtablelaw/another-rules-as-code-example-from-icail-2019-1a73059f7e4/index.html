<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Another Rules as Code example from ICAIL 2019 | Jason Morris</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="A short while ago I wrote a post about how you can use AustLII’s DataLex to take legislation and turn it into code."><meta name=generator content="Hugo 0.101.0"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel=stylesheet href=/ananke/css/main.min.css><meta property="og:title" content="Another Rules as Code example from ICAIL 2019"><meta property="og:description" content="A short while ago I wrote a post about how you can use AustLII’s DataLex to take legislation and turn it into code."><meta property="og:type" content="article"><meta property="og:url" content="https://JasonMorrisSC.github.io/post/roundtablelaw/another-rules-as-code-example-from-icail-2019-1a73059f7e4/"><meta property="article:section" content="post"><meta property="article:published_time" content="2019-06-21T15:46:17+00:00"><meta property="article:modified_time" content="2019-06-21T15:46:17+00:00"><meta itemprop=name content="Another Rules as Code example from ICAIL 2019"><meta itemprop=description content="A short while ago I wrote a post about how you can use AustLII’s DataLex to take legislation and turn it into code."><meta itemprop=datePublished content="2019-06-21T15:46:17+00:00"><meta itemprop=dateModified content="2019-06-21T15:46:17+00:00"><meta itemprop=wordCount content="1100"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Another Rules as Code example from ICAIL 2019"><meta name=twitter:description content="A short while ago I wrote a post about how you can use AustLII’s DataLex to take legislation and turn it into code."></head><body class="ma0 avenir bg-near-white"><header><div class=bg-black><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">Jason Morris</a><div class="flex-l items-center"><ul class="pl0 mr3"><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/about/ title="About Jason page">About Jason</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/project/ title="Projects page">Projects</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/post/ title="Rules as Code Diary page">Rules as Code Diary</a></li></ul><div class=ananke-socials><a href=https://twitter.com/RoundTableLaw target=_blank class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel=noopener aria-label="follow on Twitter——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:{{ .fill }}"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg></span></a></div></div></div></nav></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked">RULES AS CODE DIARY</aside><div id=sharing class="mt3 ananke-socials"><a href="https://twitter.com/share?url=https://JasonMorrisSC.github.io/post/roundtablelaw/another-rules-as-code-example-from-icail-2019-1a73059f7e4/&text=Another%20Rules%20as%20Code%20example%20from%20ICAIL%202019" class="ananke-social-link twitter no-underline" aria-label="share on Twitter"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:{{ .fill }}"/></svg></span></a></div><h1 class="f1 athelas mt3 mb1">Another Rules as Code example from ICAIL 2019</h1><time class="f6 mv4 dib tracked" datetime=2019-06-21T15:46:17Z>June 21, 2019</time></header><div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p>A short while ago I wrote <a href=https://medium.com/@jason_90344/rules-as-code-can-and-should-be-done-without-programmers-fb3e0f4dafa5>a post about how you can use AustLII’s DataLex to take legislation and turn it into code</a>.</p><p>This week I’m attending the <a href=https://icail2019-cyberjustice.com/>International Conference on Artificial Intelligence and Law (ICAIL 2019)</a> at the University of Montreal Cyberjustice Lab. As I type, I’m in a tutorial session discussing a new open-source tool for Rules as Code, called NAI.</p><h4 id=encoding-the-law>Encoding The Law</h4><p>I decided to re-implement the same code from the previous post in order to see the differences. As you might recall, it was section 2 of <a href=https://www.canlii.org/en/ab/laws/stat/rsa-2000-c-m-13/latest/rsa-2000-c-m-13.html>Alberta’s Mental Health Act</a>, and reads as follows:</p><blockquote><p><strong>Admission certificate</strong></p></blockquote><blockquote><p><strong>2</strong> When a physician examines a person and is of the opinion that the person is</p></blockquote><blockquote><p>(a) suffering from mental disorder,</p></blockquote><blockquote><p>(b) likely to cause harm to the person or others or to suffer substantial mental or physical deterioration or serious physical impairment, and</p></blockquote><blockquote><p>(c) unsuitable for admission to a facility other than as a formal patient,</p></blockquote><blockquote><p>the physician may, not later than 24 hours after the examination, issue an admission certificate in the prescribed form with respect to the person.</p></blockquote><p>In NAI, you set out the law and the questions you want to ask in different contexts. To set out the law, you create what NAI calls a “legislation” file.</p><p>You start with the text of the legislation, and then you highlight sections of the legislation and annotate them as either “terms” or “connectives”. So in the picture below, the paragraph as a whole you can see has been highlighted in a grey box, which creates a “if permission” connective. The smaller grey boxes are all “and” connectives, and the coloured boxes are terms.</p><p>I found it easier to get the demo (which is still in beta) to work by getting rid of all the line breaks in the legislation and taking out section numbers, but I’m not sure either was necessary.</p><p><img src=/1__JjrXHwbSPcOl0SpEf1eNIQ.png alt></p><p>When you are annotating “terms” (the coloured boxes), it allows you to re-use the terms you have already defined, or create new ones. From these annotations it builds a formalization, which you can review.</p><p><img src=/1__wOQheJSaldmRwsYb2P6MmA.png alt></p><h4 id=encoding-a-query>Encoding a Query</h4><p>Then, to use the code you create a “query” that includes the things you know to be true and the question you want an answer to. It proceeds in the same way, where you start with plain text, and then annotate it to create the query.</p><p>This feels slightly artificial, because the text does not exist anywhere before you start typing it. So typing it and then annotating it feels like two steps where one might have sufficed. But the parallel to the way legislation is annotated, and the fact that you can re-use the terms used in the legislation, might make the learning curve less steep.</p><p>When you start the query you tell it what legislation you are using, and then you have access to all the same terms that were created in the legislation file.</p><p>So what I want to do is set out that all the required factors have been met, and then ask whether or not the doctor is permitted to issue a certificate.</p><p>At first, I was getting errors, because I was incorrectly asking whether or not the doctor HAD issued a certificate, when what I wanted to ask was whether or not the doctor was permitted to do so. NAI uses a deontic logical language, which means that obligations, permissions, and prohibitions are some of the connectives that you are able to use, in order to be able to ask questions like “in this circumstance what is permitted?”</p><p>Here is what it looks like when the query is typed in, and annotated.</p><p><img src=/1__rzSrD224Kho0OOugOQ5xww.png alt></p><p>You can see there are three boxes surrounding the last line. The blue box refers to the “issue certificate” term that was created in the legislation. The next, grey box, is a “permission” connective. And the slightly reddish one surrounding the grey one is the “Goal” connective, which tells the tool what you are trying to find out.</p><p>The formalized version of the query looks like this:</p><p><img src=/1__Ifg4dr4oQr9hSX24xuhlcQ.png alt></p><p>Now, you can just run the query by clicking on the “execute query” button you can see above. The result looks like this:</p><p><img src=/1__QSWTq110YVkfQXz8vtsaiQ.png alt></p><p>If I delete the line saying that the doctor has examined the patient, save the query, and run it again, I get this:</p><p><img src=/1__WNUqqRjVhlql__EZkD71d5g.png alt></p><h4 id=impressions>Impressions</h4><p>Compared to the DataLex tool, NAI has some advantages. First, it is capable of dealing with more complicated predicate logic, allowing you to ask much more complicated questions, like “are there any doctors who are permitted to issue a certificate?” (I didn’t use those features in the example above to maintain symmetry with the DataLex example.)</p><p>If the ability to ask questions about permissions, prohibitions, and obligations is valuable to you, it also integrates those features.</p><p>It also helpfully distinguishes between the law, and the question you are currently interested in asking.</p><p>There are also disadvantages. Unlike DataLex, NAI cannot ask you for the pieces of information it needs in order to answer the query. If you remove all the facts, and run the query again, you just get NAI telling you that the goal query is not provable.</p><h4 id=is-highlighting-the-right-interface-for-logic-programming>Is “Highlighting” the right interface for logic programming?</h4><p>What is really interesting to me about NAI is the highlighting and annotating metaphor for generating formalisms. DataLex, by comparison, uses something called controlled natural language to give people a more user-friendly interface to logic programming.</p><p>I think that is the real obstacle to seeing these tools finally adopted, and I’m very pleased to see someone who is trying something innovative on the user interface side.</p><p>I’m not convinced, yet, that highlighting is the right approach, for a couple of reasons. Or at least not on its own. One reason is that legislation can be written in ways where the logical elements are disconnected from one another, which would require re-writing the legislation before annotating it. There are also a lot of assumptions that are not stated explicitly in a law,</p><h4 id=open-source>Open Source</h4><p>The other big advantage of NAI over DataLex is that the tool is 100% open source. It is <a href=https://github.com/normativeai/frontend>available on GitHub</a>.</p><p>So whatever features it does not have can be added by whoever needs them, and there is no cost for a lawyer or legal aid organization to use it to automate legal services for people who are unserved by the existing legal services market.</p><p>Even if you run it on the developer’s servers, it is a more fully-festured app than DataLex, allowing you to save and share what you have built. <a href=http://nai.uni.lu>Check it out here</a>.</p><ul class=pa0></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links"><p class="f5 b mb3">What's in this post</p><nav id=TableOfContents><ul><li><ul><li><ul><li><ul><li><a href=#encoding-the-law>Encoding The Law</a></li><li><a href=#encoding-a-query>Encoding a Query</a></li><li><a href=#impressions>Impressions</a></li><li><a href=#is-highlighting-the-right-interface-for-logic-programming>Is “Highlighting” the right interface for logic programming?</a></li><li><a href=#open-source>Open Source</a></li></ul></li></ul></li></ul></li></ul></nav></div></aside></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://JasonMorrisSC.github.io>&copy; Jason Morris 2022</a><div><div class=ananke-socials><a href=https://twitter.com/RoundTableLaw target=_blank class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel=noopener aria-label="follow on Twitter——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:{{ .fill }}"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg></span></a></div></div></div></footer></body></html>