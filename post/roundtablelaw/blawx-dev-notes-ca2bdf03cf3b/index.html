<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Blawx Dev Notes | Jason Morris</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="I took the opportunity over the last couple of days to spend some time working on long-planned upgrades to Blawx. It has been partly…"><meta name=generator content="Hugo 0.101.0"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel=stylesheet href=/ananke/css/main.min.css><meta property="og:title" content="Blawx Dev Notes"><meta property="og:description" content="I took the opportunity over the last couple of days to spend some time working on long-planned upgrades to Blawx. It has been partly…"><meta property="og:type" content="article"><meta property="og:url" content="https://JasonMorrisSC.github.io/post/roundtablelaw/blawx-dev-notes-ca2bdf03cf3b/"><meta property="article:section" content="post"><meta property="article:published_time" content="2021-01-17T16:37:02+00:00"><meta property="article:modified_time" content="2021-01-17T16:37:02+00:00"><meta itemprop=name content="Blawx Dev Notes"><meta itemprop=description content="I took the opportunity over the last couple of days to spend some time working on long-planned upgrades to Blawx. It has been partly…"><meta itemprop=datePublished content="2021-01-17T16:37:02+00:00"><meta itemprop=dateModified content="2021-01-17T16:37:02+00:00"><meta itemprop=wordCount content="961"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Blawx Dev Notes"><meta name=twitter:description content="I took the opportunity over the last couple of days to spend some time working on long-planned upgrades to Blawx. It has been partly…"></head><body class="ma0 avenir bg-near-white"><header><div class=bg-black><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">Jason Morris</a><div class="flex-l items-center"><ul class="pl0 mr3"><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/about/ title="About Jason page">About Jason</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/project/ title="Projects page">Projects</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/post/ title="Rules as Code Diary page">Rules as Code Diary</a></li></ul><div class=ananke-socials><a href=https://twitter.com/RoundTableLaw target=_blank class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel=noopener aria-label="follow on Twitter——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:{{ .fill }}"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg></span></a></div></div></div></nav></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked">RULES AS CODE DIARY</aside><div id=sharing class="mt3 ananke-socials"><a href="https://twitter.com/share?url=https://JasonMorrisSC.github.io/post/roundtablelaw/blawx-dev-notes-ca2bdf03cf3b/&text=Blawx%20Dev%20Notes" class="ananke-social-link twitter no-underline" aria-label="share on Twitter"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:{{ .fill }}"/></svg></span></a></div><h1 class="f1 athelas mt3 mb1">Blawx Dev Notes</h1><time class="f6 mv4 dib tracked" datetime=2021-01-17T16:37:02Z>January 17, 2021</time></header><div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p>I took the opportunity over the last couple of days to spend some time working on long-planned upgrades to Blawx. It has been partly successful, and partly an exercise in frustration.</p><p>The frustration comes from the fact that I’m working with limited processing power here in my hotel room in Singapore, having only brought a Surface Go tablet with me for writing code. To get any further, I think I’m going to have to bite the bullet and pay for a development server.</p><p>But here’s what I’ve accomplished so far…</p><h3 id=dates-times-and-durations>Dates, Times, and Durations</h3><p><img src=/1__gEtXYkd8yUBOv__HnrPp9rQ.png alt></p><p>Blawx features strings, numbers, and booleans, and I have wanted for a very long time to expand that to include dates, times, datetimes, and durations. That process is now complete. The dev branch has new datatype blocks, new data value blocks, and I also implemented a number of date math functions.</p><p><img src=/1__T__AMwQTIUmEnpoOigvfk4w.png alt></p><p>One of the frustrations of dealing with Flora-2 has been how it does not have all the same date math methods built-in that its commercial cousin ErgoAI does. So last week I wrote some Flora-2 code to fill that gap. That code has been added to Blawx, and powers the blocks which allow you to calculate the duration between two dates or datetimes.</p><h3 id=string-methods>String Methods</h3><p><img src=/1__gzHZmRrDy9bEg3UYoCVBeQ.png alt></p><p>While I was at it implementing date methods, it seemed like a good opportunity to add some string methods. So the dev branch now has a bunch of methods for manipulating text.</p><p>Making the string functions work required moving away from the default string block definition, which makes it reverse incompatible.</p><h3 id=emojis-vs-inline-graphics>Emojis vs. Inline Graphics</h3><p>One of the things that I have struggled with in the Blockly interface is that while you can choose a colour for the block to indicate it’s type, or the type of data it deals with, there is no obvious way to indicate the data required by a specific input inside a block.</p><p>Some people have proposed colouring the blocks as a gradient in order to indicate what data type goes where, but I’m not a fan.</p><p><img src=/1__HyK9eTHjAu__Nnz__VPvM8DQ.png alt></p><p>I’ve decided to try using emojis to represent data types, and put those emojis to the left of inline value inputs that require a particular type of data. I’m not 100% I’m going to stay with that design, but I’m not hating it, yet, either.</p><p>At the same time, in the course of generating a custom string value block I learned how Google has added inline images to their blocks, and I’m considering going back to the drawing board and seeing if there is something a little more monochrome and consistent that I could design. Part of the problem with using emojis is that they are going to show up differently depending on what system they appear on.</p><p>So don’t get attached.</p><h3 id=renaming-strings-and-booleans>Renaming Strings and Booleans</h3><p>I’m intent on keeping things as simple as I possibly can, which is why for a long time I have wanted to rename “string” inside Blawx to “text”, which makes more intuitive sense. That is now a part of the development version, and at the same time I have renamed “True/False” to “Yes/No”. I may change my mind on that one.</p><h3 id=rewriting-the-reasoner-api-in-python>Rewriting the Reasoner API in Python</h3><p>I spent the better part of 12 hours working on rewriting the reasoner API in Python today, and that was not any fun at all. The libraries that I thought I was going to use turned out to be so badly written I needed to abandon that plan and effectively rewrite the parts that I needed. Then I ran into an obscure temporary file glitch that took me hours to debug. Then I needed to learn the right Apache and Docker incantations in order to get python scripts to respond to API requests.</p><p>I’m still not done, because of the above-mentioned processing limitations, but I’m close. And this is a thing that really needed to happen, because the old reasoner code was forcing the interface to slow down to a crawl in order to be able to deal with how Docassemble reports data with circular references.</p><p>It’s a whole thing.</p><p>Once I can get a dev environment with some actual horsepower, I should be able to rebuild it, test it with external data, and see if it actually works or not.</p><h3 id=cardinalities>Cardinalities</h3><p>In my dream demo, you create Blawx code, draft a query in Blawx, and then that query gets auto-magically turned into an online app.</p><p>In order for that to happen, the app needs to know what data to collect, which means it needs to know <em>how many</em> pieces of information you might need to collect. Which means that I need to update the attribute definition blocks to deal with cardinalities.</p><p>The code is written, but it hasn’t even been pushed to dev, yet, because I haven’t been able to test it. But here’s what it’s going to look like when I can.</p><p><img src=/1__lpkAFozbefOFpqGO6fIOpA.png alt></p><h3 id=whats-next>What’s Next?</h3><p>I am focused on a demo that I want to give at some point in the future. In this demo, a person opens up Blawx, imports some pre-written Rules as Code, and writes a question. Then they click a button, and they are taken to a Docassemble interview that collects the required information, answers the query, and gives them an explanation for that answer with links to source material.</p><p>So in the medium term, I’ll be working on explanations and auto-generated interviews, and all the interface elements required for both of those things.</p><p>In the shorter term, there’s a lot of progress sitting in the dev branch right now that needs to be pushed to 0.2.3-alpha. But that can only happen after I’ve done some more tests, and updated the documentation and some live demos that I’m committed to maintaining.</p><ul class=pa0></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links"><p class="f5 b mb3">What's in this post</p><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#dates-times-and-durations>Dates, Times, and Durations</a></li><li><a href=#string-methods>String Methods</a></li><li><a href=#emojis-vs-inline-graphics>Emojis vs. Inline Graphics</a></li><li><a href=#renaming-strings-and-booleans>Renaming Strings and Booleans</a></li><li><a href=#rewriting-the-reasoner-api-in-python>Rewriting the Reasoner API in Python</a></li><li><a href=#cardinalities>Cardinalities</a></li><li><a href=#whats-next>What’s Next?</a></li></ul></li></ul></li></ul></nav></div><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links"><p class="f5 b mb3">Related</p><ul class="pa0 list"><li class=mb2><a href=/post/roundtablelaw/computational-law-diary-adding-explanations-to-blawx-bdbd3e27e366/>Adding Explanations to Blawx</a></li><li class=mb2><a href=/post/roundtablelaw/world-logic-day-2021-bob-knows-my-name-844e99013548/>World Logic Day 2021 (Bob knows my name!)</a></li><li class=mb2><a href=/post/roundtablelaw/new-year-new-look-new-flora-2-c06ef3ad16a6/>New Year, New Look, New Flora-2</a></li><li class=mb2><a href=/post/roundtablelaw/computational-law-diary-untying-complicated-not-s-a-wrap-on-coding-the-law-2020-and-singapore-bc75cf89015c/>Untying Complicated “Not”s, a Wrap on Coding the Law 2020, and Singapore…</a></li><li class=mb2><a href=/post/roundtablelaw/computational-law-diary-jasons-timepoint-algebra-d8bc215db2ce/>Jason’s Timepoint Algebra</a></li><li class=mb2><a href=/post/roundtablelaw/computational-law-diary-progress-on-allen-interval-algebra-e283a2ddf005/>Progress on Allen Interval Algebra</a></li><li class=mb2><a href=/post/roundtablelaw/computational-law-diary-getting-smarter-about-time-7a72f5275ca7/>Getting Smarter about Time</a></li><li class=mb2><a href=/post/roundtablelaw/computational-law-diary-more-explanations-encoding-safe-again-and-twitch-9f60d20d0a99/>More Explanations, Encoding SAFE again, and Twitch</a></li><li class=mb2><a href=/post/roundtablelaw/computational-law-diary-progress-on-explanations-2ad8e37e30ad/>Progress on Explanations</a></li><li class=mb2><a href=/post/roundtablelaw/computational-law-diary-blawx-runner-up-at-atla-and-visual-interfaces-rock-904809dfbd26/>Blawx Runner Up at ATLA, and Visual Interfaces Rock</a></li><li class=mb2><a href=/post/roundtablelaw/computational-law-diary-encoding-for-greater-clarity-provisions-698a83f4612c/>Encoding “For Greater Clarity” Provisions</a></li><li class=mb2><a href=/post/roundtablelaw/playing-along-with-rules-as-code-6c837b42a33e/>Playing Along with Rules as Code</a></li><li class=mb2><a href=/post/roundtablelaw/demo-of-blawx-integration-with-docassemble-over-api-for-rules-as-code-1c631a3c24fc/>Demo of Blawx Integration with Docassemble over API for Rules as Code</a></li><li class=mb2><a href=/post/roundtablelaw/live-demo-integrating-docassemble-and-ergo-lite-for-logic-coding-f35e9f25f311/>Live Demo: Integrating Docassemble and Ergo Lite for Logic Coding</a></li><li class=mb2><a href=/post/roundtablelaw/a-computer-takes-the-lsat-conclusion-86dc7467b14d/>A Computer Takes the LSAT: Conclusion</a></li></ul></div></aside></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://JasonMorrisSC.github.io>&copy; Jason Morris 2022</a><div><div class=ananke-socials><a href=https://twitter.com/RoundTableLaw target=_blank class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel=noopener aria-label="follow on Twitter——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:{{ .fill }}"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg></span></a></div></div></div></footer></body></html>