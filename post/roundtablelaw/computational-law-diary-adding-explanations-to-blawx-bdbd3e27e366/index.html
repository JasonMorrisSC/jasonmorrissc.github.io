<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Adding Explanations to Blawx | Jason Morris</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="Blawx is my web-based tool for Rules as Code. It is a graphical development environment that allows you to easily learn to encode legal…"><meta name=generator content="Hugo 0.94.2"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel=stylesheet href=/ananke/css/main.min.css><meta property="og:title" content="Adding Explanations to Blawx"><meta property="og:description" content="Blawx is my web-based tool for Rules as Code. It is a graphical development environment that allows you to easily learn to encode legal…"><meta property="og:type" content="article"><meta property="og:url" content="https://JasonMorrisSC.github.io/post/roundtablelaw/computational-law-diary-adding-explanations-to-blawx-bdbd3e27e366/"><meta property="article:section" content="post"><meta property="article:published_time" content="2020-10-23T21:22:04+00:00"><meta property="article:modified_time" content="2020-10-23T21:22:04+00:00"><meta itemprop=name content="Adding Explanations to Blawx"><meta itemprop=description content="Blawx is my web-based tool for Rules as Code. It is a graphical development environment that allows you to easily learn to encode legal…"><meta itemprop=datePublished content="2020-10-23T21:22:04+00:00"><meta itemprop=dateModified content="2020-10-23T21:22:04+00:00"><meta itemprop=wordCount content="904"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Adding Explanations to Blawx"><meta name=twitter:description content="Blawx is my web-based tool for Rules as Code. It is a graphical development environment that allows you to easily learn to encode legal…"></head><body class="ma0 avenir bg-near-white"><header><div class=bg-black><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">Jason Morris</a><div class="flex-l items-center"><ul class="pl0 mr3"><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/about/ title="About Jason page">About Jason</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/project/ title="Projects page">Projects</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/post/ title="Rules as Code Diary page">Rules as Code Diary</a></li></ul><div class=ananke-socials><a href=https://twitter.com/RoundTableLaw target=_blank class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel=noopener aria-label="follow on Twitter——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:{{ .fill }}"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg></span></a></div></div></div></nav></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked">RULES AS CODE DIARY</aside><div id=sharing class="mt3 ananke-socials"><a href="https://twitter.com/share?url=https://JasonMorrisSC.github.io/post/roundtablelaw/computational-law-diary-adding-explanations-to-blawx-bdbd3e27e366/&text=Adding%20Explanations%20to%20Blawx" class="ananke-social-link twitter no-underline" aria-label="share on Twitter"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:{{ .fill }}"/></svg></span></a></div><h1 class="f1 athelas mt3 mb1">Adding Explanations to Blawx</h1><time class="f6 mv4 dib tracked" datetime=2020-10-23T21:22:04Z>October 23, 2020</time></header><div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p><img src=/1__9__ywTDz6VshjxSKiK6xVQQ.png alt></p><p><a href=https://www.blawx.com>Blawx</a> is my web-based tool for Rules as Code. It is a graphical development environment that allows you to easily learn to encode legal knowledge, describe fact scenarios, and ask questions and get answers.</p><p>One of the features that is missing from Blawx is explanations for those answers. Explanations are a very important part of Rules as Code for two reasons. First, they provide the user with context and reasons for the results that your tool provides, which goes to the accountability and transparency of your tool, and increases its trustworthiness. Second, explanations are an effective tool for knowledge engineers to troubleshoot the encoding as they are writing it.</p><p>So explanations have been high on the “to do” list for Blawx features since day 1.</p><h3 id=reinventing-the-why-wheel>Reinventing the “Why” Wheel</h3><p>One of the most frustrating parts of dealing with Rules as Code in 2020 is how much of the technology we need was readily available 40 years ago, and has now disappeared.</p><blockquote><p>Expert systems that were capable of explaining their conclusions were commonplace in the 1980s. Now, there are no open source tools available for download that include explanations as a feature. All of the previous art is hidden in academic writings.</p></blockquote><p>As it happens, some time ago I came across <a href=https://onlinelibrary.wiley.com/doi/abs/10.1111/j.1467-8640.1986.tb00079.x>a paper from June of 1986</a>, by Sterling and Lalee, entitled “An Explanation Shell for Expert Systems.” This paper thankfully set out an example of how you can write a generic explanation system for any expert system written in Prolog.</p><p>Blawx uses a language called <a href=http://flora.sourceforge.net/>Ergo Lite</a>, which is in the Prolog family of languages. The implementation in that paper gave me what I needed to start reinventing the wheel so that people can ask “why” about conclusions they get from Blawx.</p><p>I started work on it ages ago, and haven’t touched it since last June. This week I reacquainted myself with what I had accomplished so far, and I was pleasantly surprised.</p><p>What is wonderful about the meta-programming approach that Sterling and Lalee set out is that you can make any yes/no query in Blawx explainable without needing to change the rules at all. It allows you to just add an “Explanation” block to Blawx’s toolbox to give users access to the new command. The Explanation block will accept any “yes/no” query, return the answer, and (eventually) return a tree-structured explanation for how that answer was obtained.</p><h3 id=meta-data-for-meta-programming>Meta-Data for Meta-Programming</h3><p>You don’t <em>need</em> to change the Rules, but you <em>can</em>. ErgoLite has features for providing meta-data about Rules. If Blawx’s interface can be updated to allow the user to do that, that meta-data can be used to define how the explanations should read. Here’s an example of a set of silly rules I have been using for testing, with meta-data provided in the Ergo Lite syntax.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-prolog data-lang=prolog><span style=display:flex><span><span style=color:#e6db74>@</span>!{What_It_Takes_To_Be_Bigbird[<span style=color:#e6db74>source-&gt;&#39;My friend&#39;</span>, <span style=color:#e6db74>description-&gt;&#39;to be a bigbird, you have to be tall, yellow, and eligible.&#39;</span>]}  
</span></span><span style=display:flex><span><span style=color:#a6e22e>bigbird</span>(<span style=color:#e6db74>?</span>X) :-  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>tall</span>(<span style=color:#e6db74>?</span>X),  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>yellow</span>(<span style=color:#e6db74>?</span>X),  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>eligible</span>(<span style=color:#e6db74>?</span>X).
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e6db74>@</span>!{What_Makes_You_Eligible[<span style=color:#e6db74>source-&gt;&#39;My friend&#39;</span>,<span style=color:#e6db74>description-&gt;&#39;to be eligible, you have to be old or military.&#39;</span>]}  
</span></span><span style=display:flex><span><span style=color:#a6e22e>eligible</span>(<span style=color:#e6db74>?</span>X) :-  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>old</span>(<span style=color:#e6db74>?</span>X);  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>military</span>(<span style=color:#e6db74>?</span>X).
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>old</span>(BB).  
</span></span><span style=display:flex><span><span style=color:#a6e22e>tall</span>(BB).  
</span></span><span style=display:flex><span><span style=color:#a6e22e>yellow</span>(BB).
</span></span></code></pre></div><p>The first rule explains what you have to be in order to qualify as a “Big Bird.” The second rule explains what you have to be in order to be “eligible.” And the facts are laid out that BB is old, tall, and yellow.</p><p>With the exception of the <code>source</code> and <code>description</code> meta-data provided for the two rules, this is functionally equivalent to the sort of ErgoLite code that Blawx already generates.</p><p>When you run the query <code>?- solve(bigbird(BB)).</code> , which for our purposes means “explain why BB is a bigbird,” you get the following results:</p><pre tabindex=0><code>According to My friend, to be a bigbird, you have to be tall, yellow, and eligible..  
bigbird(BB) can be proven if (tall(BB), (yellow(BB), eligible(BB))) can be proven.  
tall(BB) is a base fact.  
yellow(BB) is a base fact.  
According to My friend, to be eligible, you have to be old or military..  
eligible(BB) can be proven if (old(BB); military(BB)) can be proven.  
old(BB) is a base fact.  
Disjunction of old(BB) or [military(BB)] is satisfied.  
Conjunction of yellow(BB) and [eligible(BB)] is satisfied.  
Conjunction of tall(BB) and [(yellow(BB), eligible(BB))] is satisfied.
</code></pre><p>The result is by no means perfect. There is a lot of work to be done to fit it into a structure that will make it possible to let the user start at the main conclusion and drill down into the reasons for sub-sections of it. But what I’ve got suggests that the technical obstacles to an explanation feature for Blawx have fallen.</p><p>Now it’s just a matter of writing the code.</p><h3 id=quick-notes>Quick Notes</h3><ul><li>Oct 29: Stanford CodeX lunch webinar on <a href=https://www.blawx.com/>Blawx</a> (free to join, if you’re interested)</li><li>Nov 4: Cyberjustice Laboratory (University of Montreal) webinar on <a href=https://www.blawx.com/>Blawx</a></li><li>Nov 17: European Commission Rules as Code <a href=https://www.blawx.com/>Blawx</a> demo in conjunction with the OECD’s “<a href=https://gov-after-shock.oecd-opsi.org/>Government After Shock</a>” event.</li><li>Nov 17&18: Guest lecturing for Megan Ma’s course at Sciences Po.</li><li>Nov 24: Rules as Code session with Canada School of Public Service</li></ul><p><em>I am a lawyer at Round Table Law, I teach “Coding the Law” at the University of Alberta Faculty of Law, and I’m a senior researcher at the Singapore Management University Centre for Computational Law. Computational Law Diary is a series of posts on what I’m thinking about in the computational law world. They are my own opinion, and do not reflect the opinions of the Centre, the Research Programme, SMU, U of A, or anyone else.</em></p><ul class=pa0></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links"><p class="f5 b mb3">What's in this post</p><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#reinventing-the-why-wheel>Reinventing the “Why” Wheel</a></li><li><a href=#meta-data-for-meta-programming>Meta-Data for Meta-Programming</a></li><li><a href=#quick-notes>Quick Notes</a></li></ul></li></ul></li></ul></nav></div><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links"><p class="f5 b mb3">Related</p><ul class="pa0 list"><li class=mb2><a href=/post/roundtablelaw/computational-law-diary-blawx-runner-up-at-atla-and-visual-interfaces-rock-904809dfbd26/>Blawx Runner Up at ATLA, and Visual Interfaces Rock</a></li><li class=mb2><a href=/post/roundtablelaw/computational-law-diary-encoding-for-greater-clarity-provisions-698a83f4612c/>Encoding “For Greater Clarity” Provisions</a></li><li class=mb2><a href=/post/roundtablelaw/playing-along-with-rules-as-code-6c837b42a33e/>Playing Along with Rules as Code</a></li><li class=mb2><a href=/post/roundtablelaw/demo-of-blawx-integration-with-docassemble-over-api-for-rules-as-code-1c631a3c24fc/>Demo of Blawx Integration with Docassemble over API for Rules as Code</a></li><li class=mb2><a href=/post/roundtablelaw/live-demo-integrating-docassemble-and-ergo-lite-for-logic-coding-f35e9f25f311/>Live Demo: Integrating Docassemble and Ergo Lite for Logic Coding</a></li><li class=mb2><a href=/post/roundtablelaw/a-computer-takes-the-lsat-conclusion-86dc7467b14d/>A Computer Takes the LSAT: Conclusion</a></li><li class=mb2><a href=/post/roundtablelaw/a-computer-takes-the-lsat-resources-77e5d07d7e3a/>A Computer Takes the LSAT: Resources</a></li><li class=mb2><a href=/post/roundtablelaw/a-computer-takes-the-lsat-generating-fact-scenarios-3a52fd6fe908/>A Computer Takes the LSAT: Generating Fact Scenarios</a></li><li class=mb2><a href=/post/roundtablelaw/a-computer-takes-the-lsat-question-6-884c47d55b2b/>A Computer Takes the LSAT: Question 6</a></li><li class=mb2><a href=/post/roundtablelaw/a-computer-takes-the-lsat-question-7-aa98d14d3217/>A Computer Takes the LSAT: Question 7</a></li><li class=mb2><a href=/post/roundtablelaw/a-computer-takes-the-lsat-question-8-bf39194443da/>A Computer Takes the LSAT: Question 8</a></li><li class=mb2><a href=/post/roundtablelaw/a-computer-takes-the-lsat-question-9-f33d7200f48f/>A Computer Takes the LSAT: Question 9</a></li><li class=mb2><a href=/post/roundtablelaw/a-computer-takes-the-lsat-question-10-2172137fdc57/>A Computer Takes the LSAT: Question 10</a></li><li class=mb2><a href=/post/roundtablelaw/a-computer-takes-the-lsat-the-preamble-8b25c994ef7c/>A Computer Takes the LSAT: The Preamble</a></li><li class=mb2><a href=/post/roundtablelaw/a-computer-takes-the-lsat-introduction-3a65fd8b982/>A Computer Takes the LSAT: Introduction</a></li></ul></div></aside></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://JasonMorrisSC.github.io>&copy; Jason Morris 2022</a><div><div class=ananke-socials><a href=https://twitter.com/RoundTableLaw target=_blank class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel=noopener aria-label="follow on Twitter——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:{{ .fill }}"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg></span></a></div></div></div></footer></body></html>