<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Introducing L4-Docassemble | Jason Morris</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="SMU CClaw brings logic-based legal encodings, defaults and exceptions, reusable rules and data structures, explanations, rapid prototyping…"><meta name=generator content="Hugo 0.101.0"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel=stylesheet href=/ananke/css/main.min.css><meta property="og:title" content="Introducing L4-Docassemble"><meta property="og:description" content="SMU CClaw brings logic-based legal encodings, defaults and exceptions, reusable rules and data structures, explanations, rapid prototyping…"><meta property="og:type" content="article"><meta property="og:url" content="https://JasonMorrisSC.github.io/post/roundtablelaw/introducing-l4-docassemble-69ce4b1fb1e7/"><meta property="article:section" content="post"><meta property="article:published_time" content="2021-05-05T08:25:25+00:00"><meta property="article:modified_time" content="2021-05-05T08:25:25+00:00"><meta itemprop=name content="Introducing L4-Docassemble"><meta itemprop=description content="SMU CClaw brings logic-based legal encodings, defaults and exceptions, reusable rules and data structures, explanations, rapid prototyping…"><meta itemprop=datePublished content="2021-05-05T08:25:25+00:00"><meta itemprop=dateModified content="2021-05-05T08:25:25+00:00"><meta itemprop=wordCount content="2209"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Introducing L4-Docassemble"><meta name=twitter:description content="SMU CClaw brings logic-based legal encodings, defaults and exceptions, reusable rules and data structures, explanations, rapid prototyping…"></head><body class="ma0 avenir bg-near-white"><header><div class=bg-black><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">Jason Morris</a><div class="flex-l items-center"><ul class="pl0 mr3"><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/about/ title="About Jason page">About Jason</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/project/ title="Projects page">Projects</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/post/ title="Rules as Code Diary page">Rules as Code Diary</a></li></ul><div class=ananke-socials><a href=https://twitter.com/RoundTableLaw target=_blank class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel=noopener aria-label="follow on Twitter——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:{{ .fill }}"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg></span></a></div></div></div></nav></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked">RULES AS CODE DIARY</aside><div id=sharing class="mt3 ananke-socials"><a href="https://twitter.com/share?url=https://JasonMorrisSC.github.io/post/roundtablelaw/introducing-l4-docassemble-69ce4b1fb1e7/&text=Introducing%20L4-Docassemble" class="ananke-social-link twitter no-underline" aria-label="share on Twitter"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:{{ .fill }}"/></svg></span></a></div><h1 class="f1 athelas mt3 mb1">Introducing L4-Docassemble</h1><time class="f6 mv4 dib tracked" datetime=2021-05-05T08:25:25Z>May 5, 2021</time></header><div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p>At <a href=https://cclaw.smu.edu.sg/>SMU’s Centre for Computational Law</a> we are working on an open source domain specific language for law, called L4. The idea is that you should be able to write legal rules, like laws or contracts, in L4, and other applications should be able to translate that encoding into other forms to do useful things.</p><p>One of the useful things that we want people to be able to do with L4 is to build expert systems. An expert system is an application that is given a question to answer, collects relevant information from a user, and then provides the answer an expert would give. A familiar example of an expert system is TurboTax, which answers the question of “how should I fill in my tax forms?”</p><h3 id=open-source-legal-expert-system-tools-what-are-they-missing>Open Source Legal Expert System Tools: What are they missing?</h3><p>If you are interested in developing legal expert systems, and you want to do it using open source software (and you should), your best option right now is <a href=http://docassemble.org>Docassemble</a>. Docassemble is a popular open source interview tool that figures out what question to ask, and in what order, and allows you to easily customize the display of questions. You can also make it do anything else you want if you are proficient with the Python programming language.</p><p>While it is the best open source option available, and has much to recommend it, Docassemble does not have some of the features of the best commercial and closed-source tools for legal expert system development, like <a href=https://www.oracle.com/cx/service/intelligent-advisor/>Oracle Intelligent Advisor</a>, <a href=https://www.neotalogic.com/>Neota Logic</a>, and <a href=http://www.datalex.org/>DataLex</a>. Here are some of the things that currently there is no easy way to do when developing legal expert systems using open source tools.¹</p><h4 id=logical-representations-of-laws-and-contracts>Logical Representations of Laws and Contracts</h4><p>OIA, Neota Logic, and DataLex allow you to encode what you know about the law in a declarative, logic-based language, which is <em>extremely helpful</em> when encoding laws in a way that is intended to be reusable, such as in Rules as Code drafting process.</p><h4 id=prototype-user-interfaces>Prototype User Interfaces</h4><p>In OIA, Neota Logic, and DataLex, merely by specifying a data structure, a set of rules, and a question to answer, you can get a working prototype expert system interface built for you automatically.</p><h4 id=explanations-for-answers>Explanations for Answers</h4><p>OIA, Neota Logic, and DataLex all include natural language explanations for the answers their expert systems generate.</p><h3 id=legal-expert-system-tools-what-are-they-missing>Legal Expert System Tools: What are they missing?</h3><p>There are also a number of capabilities that would be helpful when building legal expert system tools, but currently do not exist anywhere. Not even OIA, Neota Logic, and DataLex can do these things.</p><h4 id=defeasibility>Defeasibility</h4><p>Laws and contracts are frequently written with rules that override other rules. It would simplify the task of encoding these rules, and maintaining the encodings when the rules change, if it was possible to encode those defeating relationships as they appear in the law, instead of having to combine defeating rules with the rules they defeat.</p><h4 id=modular-rules-and-data-structures>Modular Rules and Data Structures</h4><p>In all the existing tools, whatever data structure you use for designing the interview interface is also the data structure that you use for encoding the rules. But the best way to collect information depends on the problem you are trying to solve, not the law, and one law can solve many problems, each of which might benefit from collecting the relevant information in a different way. Encodings of rules would be more re-usable if information about how to collect information was taken out of them, so that you could use the same rules with multiple different interfaces without having to rewrite the rules.</p><p>So we set about to see if it would be possible to make it easier to use a declarative logic encoding to power a Docassemble legal expert system.</p><h4 id=multiple-justifications>Multiple Justifications</h4><p>Existing tools like OIA, Neota Logic, and DataLex are able to give explanations for their answers. But the explanation that they provide is a description of how that tool derived the answer. These tools are not capable of telling the user whether the same conclusion might have been reached in a different way on the basis of the same facts and rules.</p><p>This has practical benefits for legal expert systems where you want to allow the user to choose the most compelling explanation to put in a document. But more immediately, being able to see all of the ways that your encoding of the rules can reach the same conclusion gives the legal knowledge engineer a depth of insight into how their encoding works that is not otherwise possible. And in a Rules as Code drafting process, that insight may allow legislative and contract drafters to see problems with the actual rules that they would otherwise have missed.</p><p>Most obviously, being able to see all the multiple justifications that can be generated for a conclusion allows you to see when there are sections of your encoding (or your law or contract), that are redundant.</p><h4 id=hypothetical-reasoning>Hypothetical Reasoning</h4><p>Often, legal questions are asked with imperfect information. Most sophisticated expert systems are able to distinguish between something that is known to be false, and something that is just not known. If a necessary relevant fact is unknown, then they report the conclusion as unknown, instead of false.</p><p>It would be more helpful if a legal expert system tool could say “These are the combinations of unknown facts that would need to be true in order for the conclusion to be true.” That sort of hypothetical reasoning can be used to give contingent answers to legal questions, and to generate plans to achieve a user’s objectives. It can also be used to do analysis of rules and encodings without having to provide facts.</p><h3 id=what-is-l4-docassemble>What is L4-Docassemble?</h3><p>L4-Docasemble is our attempt to fill in some of those missing pieces in the open source legal expert tool landscape.</p><p>We are currently experimenting with using <a href=https://gitlab.software.imdea.org/ciao-lang/sCASP>s(CASP)</a> as a language for powering expert systems, and others on the team are actively working on translating L4 code into s(CASP) for that purpose. I needed to give Docassemble the ability to use those translated s(CASP) encodings. We did that with <a href=https://github.com/smucclaw/docassemble-scasp>the docassemble-scasp package, available on GitHub</a>.</p><p>We also wanted to be able to automatically generate prototype interfaces on the basis of a data structure. We achieved that by using <a href=https://github.com/smucclaw/docassemble-datatypes>the docassemble-datatypes package that we introduced at DocaCon 2020, and available on GitHub</a>.</p><p>Then we needed the ability to generate an interview on the basis of an s(CASP) encoding and a data structure. To achieve that we created a data structure format called LExSIS (Legal EXpert System Interface Schema), and implemented LExSIS for use with s(CASP) encodings in <a href=https://github.com/smucclaw/docassemble-l4>the docassemble-l4 package, which is available on GitHub</a>.²</p><p>Then we put all of them together in a single docker container that pre-installs the above packages, s(CASP), and docassemble. That is <a href=https://github.com/smucclaw/l4-docassemble>L4-Docassemble, and it is available at GitHub now</a>. Note that the L4-Docassemble package doesn’t contain any code, it is just a convenient way of installing everything at once.</p><p>The result is a legal expert system tool with the following features:</p><ul><li>Logical Representation of Rules *</li><li>Rapid Prototyping *</li><li>Natural Language Explanations *</li><li>Defeasibility +</li><li>Modular Data Structures and Rules +</li><li>Multiple Justifications +</li></ul><p>As mentioned, the features marked “*” do not exist in any other open source tool of which we are aware, and the features marked “+” are completely novel for expert system development tools.</p><p>We are continuing to work on adding hypothetical reasoning, which we expect to be able to add in a couple of months.</p><h3 id=how-do-you-use-l4-docassemble>How do you Use L4-Docassemble?</h3><ol><li>Install it.</li><li>Upload your s(CASP) and LExSIS files to the static folder in the docassemble playground.</li><li>Run the interview generation tool, which creates an interview and installs it onto your docassemble server for you.</li><li>Modify the interview however you like.</li></ol><p>All of the interview parts that are generated by L4-Docassemble are just defaults that can be replaced by the interview developer by using “plain old docassemble.”</p><h3 id=what-does-using-l4-docassemble-look-like>What Does Using L4-Docassemble Look Like?</h3><p>For a quick 3-minute introduction, check out this video:</p><p>As a demonstration of L4-Docassemble we created an expert system capable of answering questions about a piece of legislation called Rule 34. The first step was to encode Rule 34 in s(CASP). This is an excerpt of that encoding:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-prolog data-lang=prolog><span style=display:flex><span><span style=color:#75715e>% RULE 34(5)  </span>
</span></span><span style=display:flex><span><span style=color:#75715e>% (5)  Despite paragraph (1)(b), but subject to paragraph (1)(a) and (c) to (f),   </span>
</span></span><span style=display:flex><span><span style=color:#75715e>% a locum solicitor may accept an executive appointment in a business entity which   </span>
</span></span><span style=display:flex><span><span style=color:#75715e>% does not provide any legal services or law-related services, if all of the   </span>
</span></span><span style=display:flex><span><span style=color:#75715e>% conditions set out in the Second Schedule are satisfied.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>according_to</span>(<span style=color:#e6db74>r34_5</span>,<span style=color:#a6e22e>may</span>(LP,<span style=color:#e6db74>accept</span>,EA)) :-  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>legal_practitioner</span>(LP),  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>locum_solicitor</span>(LP),  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>executive_appointment_in_a_business_entity</span>(EA,BE),  
</span></span><span style=display:flex><span>    <span style=color:#f92672>not</span> <span style=color:#a6e22e>provides_legal_or_law_related_services</span>(BE),  
</span></span><span style=display:flex><span>    <span style=color:#e6db74>conditions_of_second_schedule_satisfied</span>.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>opposes</span>(<span style=color:#e6db74>r34_1</span>,<span style=color:#a6e22e>must_not</span>(LP,<span style=color:#e6db74>accept</span>,EA),<span style=color:#e6db74>r34_5</span>,<span style=color:#a6e22e>may</span>(LP,<span style=color:#e6db74>accept</span>,EA)).  
</span></span><span style=display:flex><span><span style=color:#a6e22e>opposes</span>(<span style=color:#e6db74>r34_5</span>,<span style=color:#a6e22e>may</span>(LP,<span style=color:#e6db74>accept</span>,EA),<span style=color:#e6db74>r34_1_b</span>,<span style=color:#a6e22e>must_not</span>(LP,<span style=color:#e6db74>accept</span>,EA)).
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>overrides</span>(<span style=color:#e6db74>r34_1</span>,<span style=color:#a6e22e>must_not</span>(LP,<span style=color:#e6db74>accept</span>,EA),<span style=color:#e6db74>r34_5</span>,<span style=color:#a6e22e>may</span>(LP,<span style=color:#e6db74>accept</span>,EA)).  
</span></span><span style=display:flex><span><span style=color:#a6e22e>overrides</span>(<span style=color:#e6db74>r34_5</span>,<span style=color:#a6e22e>may</span>(LP,<span style=color:#e6db74>accept</span>,EA),<span style=color:#e6db74>r34_1_b</span>,<span style=color:#a6e22e>must_not</span>(LP,<span style=color:#e6db74>accept</span>,EA)).
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>provides_legal_or_law_related_services</span>(BE) :-  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>provides</span>(BE,Serv),  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>legal_service</span>(Serv).
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>provides_legal_or_law_related_services</span>(BE) :-  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>provides</span>(BE,Serv),  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>law_related_service</span>(Serv).
</span></span></code></pre></div><p>Note how the “despite” and “subject to” parts of the original law were translated into “opposes” and “overrides” statements in the code, without having to add anything to the other rules. That is what it means to be able to write rules with defeasibility.</p><p>The next step is to write a LExSIS file. Rule 34 is a complicated piece of law with almost 100 input factors, so our demonstration LExSIS file is quite long. Here is an excerpt that describes law practices:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>rules</span>: <span style=color:#ae81ff>r34.pl  </span>
</span></span><span style=display:flex><span><span style=color:#f92672>query</span>: <span style=color:#ae81ff>legally_holds(Rule,must_not(Lawyer,accept,Position))  </span>
</span></span><span style=display:flex><span><span style=color:#f92672>data</span>:  
</span></span><span style=display:flex><span>...  
</span></span><span style=display:flex><span>  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>legal_practice  </span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>String  </span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>any</span>: <span style=color:#ae81ff>Are there any legal practices?  </span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>another</span>: <span style=color:#ae81ff>Is there another legal practice?  </span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ask</span>: <span style=color:#ae81ff>What is the name of the legal practice?  </span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>tell</span>: <span style=color:#ae81ff>the legal practice {X}  </span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>minimum</span>: <span style=color:#ae81ff>0</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>encodings</span>:  
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>law_practice(X)  </span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>attributes</span>:  
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>joint_law_venture  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>ask</span>: <span style=color:#ae81ff>Is {Y} a joint law venture?  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>type</span>: <span style=color:#ae81ff>Boolean  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>encodings</span>:  
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>joint_law_venture(Y)  </span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>formal_law_alliance  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>type</span>: <span style=color:#ae81ff>Boolean  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>ask</span>: <span style=color:#ae81ff>Is {Y} a formal law alliance?  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>encodings</span>:   
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>formal_law_alliance(Y)  </span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>foreign_law_practice  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>type</span>: <span style=color:#ae81ff>Boolean  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>ask</span>: <span style=color:#ae81ff>Is {Y} a foreign law practice?  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>encodings</span>:  
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>foreign_law_practice(Y)  </span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>jurisdiction  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>type</span>: <span style=color:#ae81ff>Enum  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>ask</span>: <span style=color:#ae81ff>What is the jurisdiction of {Y}?  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>options</span>:  
</span></span><span style=display:flex><span>        <span style=color:#f92672>singapore</span>: <span style=color:#ae81ff>Singapore  </span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>other</span>: <span style=color:#ae81ff>Somewhere Else  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>encodings</span>:  
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>jurisdiction(Y,X)  </span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>legal_practitioner  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>type</span>: <span style=color:#ae81ff>Object  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>source</span>: <span style=color:#ae81ff>person  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>minimum</span>: <span style=color:#ae81ff>0</span>  
</span></span><span style=display:flex><span>      <span style=color:#f92672>any</span>: <span style=color:#ae81ff>Are there any legal practitioners in {Y}?  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>another</span>: <span style=color:#ae81ff>Is there another legal practitioner in {Y}?  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>ask</span>: <span style=color:#ae81ff>Who is a legal practitioner in {Y}?  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>tell</span>: <span style=color:#ae81ff>the legal practitioner {X} in {Y}  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>encodings</span>:  
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>legal_practitioner(X)  </span>
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>in(X,Y)  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>attributes</span>:  
</span></span><span style=display:flex><span>        - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>locum_solicitor  </span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>ask</span>: <span style=color:#ae81ff>Is {Y} a locum solicitor?  </span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>type</span>: <span style=color:#ae81ff>Boolean  </span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>encodings</span>:  
</span></span><span style=display:flex><span>            - <span style=color:#ae81ff>locum_solicitor(Y)  </span>
</span></span><span style=display:flex><span>        - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>primary_occupation  </span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>type</span>: <span style=color:#ae81ff>Enum  </span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>ask</span>: <span style=color:#ae81ff>What is the primary occupation of {Y}?  </span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>encodings</span>:  
</span></span><span style=display:flex><span>            - <span style=color:#ae81ff>primary_occupation_of(Y,X)  </span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>options</span>:  
</span></span><span style=display:flex><span>            <span style=color:#f92672>practicing_as_a_lawyer</span>: <span style=color:#ae81ff>Practicing as a lawyer  </span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>something_else</span>: <span style=color:#ae81ff>Something Else</span>
</span></span></code></pre></div><p>You give those two files to the interview generation tool, and it creates the interview, installs it, and gives you a link. You click on the link, the interview asks all the relevant questions, one at a time, and then displays the answers using the instructions in the LExSIS files and the answers the user has already provided. Here is what one of the questions generated by the LExSIS code above looks like:</p><p><img src=/1__VaTpdnBkleL18C2zlO6gFw.png alt></p><p>Here’s what the final screen of the demonstration interview will look like.</p><p><img src=/1__3PruhwJY792HXMOZMTJRZQ.png alt></p><p>It answers the question, explains the answers in natural language, and it provides all the possible justifications for each answer. And features of LExSIS allow you to provide the source text of the encoded rules, and links to the source material, as meta-data that can be displayed to the user on request.</p><h3 id=legal-expert-systems-in-one-line-of-code>Legal Expert Systems in One Line of Code</h3><p>Imagine a situation in which someone has already written an s(CASP) encoding of, and a LExSIS file for, the law you want to ask a question about.</p><p>How do you use L4-Docassemble to create a legal expert system that answers a completely different question related to the same law?</p><ol><li>Change the <code>query</code> entry in your LExSIS file.</li><li>Rerun the interview generator.</li><li>There is no step 3.</li></ol><p>You can try this yourself by changing the query in the demo LExSIS file to <code>query: business_entity(Organization)</code>, and re-running the interview generator.</p><blockquote><p>Using L4-Docassemble, building a new legal expert system to answer a different question about the same rules requires a single line of code.</p></blockquote><p>This is the huge promise of the rules as code approach to legal expert system development. What you get from the investment of encoding your rules is not an app that can answer <em>one</em> question. You get an app factory, that can instantaneously generate an app that will answer <em>any</em> question you can pose.</p><h3 id=video-demo>Video Demo</h3><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube.com/embed/NEjrV4Wwyh8 style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div><h3 id=thanks>Thanks</h3><p>A huge thank you to J<strong>oaquín Arias Herrero</strong>, of the Universidad Rey Juan Carlos, who is one of the authors of s(CASP), both for creating the tool and for being a great resource to me in learning how to use it properly. Thanks to <strong>Jonathan Pyle</strong> for creating Docassemble and for his responsiveness and support to all its users. Thanks also to my colleagues at SMU CCLaw, in particular our Principal Investigator <strong>Meng Weng Wong</strong>, who has allowed me to spend time scratching my own itches. I would also like to specifically thank my colleagues <strong>Alfred Ang</strong>, <strong>Regina Cheong</strong>, and <strong>Liyana Mohd Ramthan</strong> who have slogged through the idempotentcy wilderness with me over the last few months.</p><p><strong>Notes:</strong></p><ol><li>There are open source reasoning tools like <a href=http://blawx.com>Blawx</a> and closed source tools like <a href=http://raap.d61.io>Regulation as a Platform</a> that feature logical representations and defeasibility, but that do not have features for the development of user interfaces. Such tools are excluded from the analysis.</li><li>I’ll write more about LExSIS in a later blog post.</li></ol><ul class=pa0></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links"><p class="f5 b mb3">What's in this post</p><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#open-source-legal-expert-system-tools-what-are-they-missing>Open Source Legal Expert System Tools: What are they missing?</a><ul><li><a href=#logical-representations-of-laws-and-contracts>Logical Representations of Laws and Contracts</a></li><li><a href=#prototype-user-interfaces>Prototype User Interfaces</a></li><li><a href=#explanations-for-answers>Explanations for Answers</a></li></ul></li><li><a href=#legal-expert-system-tools-what-are-they-missing>Legal Expert System Tools: What are they missing?</a><ul><li><a href=#defeasibility>Defeasibility</a></li><li><a href=#modular-rules-and-data-structures>Modular Rules and Data Structures</a></li><li><a href=#multiple-justifications>Multiple Justifications</a></li><li><a href=#hypothetical-reasoning>Hypothetical Reasoning</a></li></ul></li><li><a href=#what-is-l4-docassemble>What is L4-Docassemble?</a></li><li><a href=#how-do-you-use-l4-docassemble>How do you Use L4-Docassemble?</a></li><li><a href=#what-does-using-l4-docassemble-look-like>What Does Using L4-Docassemble Look Like?</a></li><li><a href=#legal-expert-systems-in-one-line-of-code>Legal Expert Systems in One Line of Code</a></li><li><a href=#video-demo>Video Demo</a></li><li><a href=#thanks>Thanks</a></li></ul></li></ul></li></ul></nav></div><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links"><p class="f5 b mb3">Related</p><ul class="pa0 list"><li class=mb2><a href=/post/roundtablelaw/legal-drafting-to-avoid-computational-complexity-115a55818493/>Legal Drafting to Avoid Computational Complexity</a></li><li class=mb2><a href=/post/roundtablelaw/modelling-the-world-the-law-and-the-question-e24ea763120e/>Modelling the World, the Law, and the Question</a></li><li class=mb2><a href=/post/roundtablelaw/and-why-it-matters-for-rules-as-code-8610e49511c8/>… and why it matters for Rules as Code</a></li><li class=mb2><a href=/post/roundtablelaw/what-is-justified-stable-model-constraint-query-driven-answer-set-programming-c895955bf68c/>What is Justified Stable Model Constraint Query-Driven Answer Set Programming?</a></li><li class=mb2><a href=/post/roundtablelaw/s-casp-as-a-rules-as-code-tool-97ec3435975c/>s(CASP) as a Rules as Code Tool</a></li><li class=mb2><a href=/post/roundtablelaw/computational-law-diary-encoding-covid-19-rules-using-basic-event-calculus-in-s-casp-32a55b789eeb/>Encoding Covid-19 rules using Basic Event Calculus in s(CASP)</a></li><li class=mb2><a href=/post/roundtablelaw/computational-law-diary-explainable-legal-ai-in-s-casp-19da0a5d956/>Explainable Legal AI in s(CASP)</a></li></ul></div></aside></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://JasonMorrisSC.github.io>&copy; Jason Morris 2022</a><div><div class=ananke-socials><a href=https://twitter.com/RoundTableLaw target=_blank class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel=noopener aria-label="follow on Twitter——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:{{ .fill }}"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg></span></a></div></div></div></footer></body></html>